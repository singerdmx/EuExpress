<div>
  <h2><%= t("forem.admin.forum.index") %></h2>
  <%= link_to t('back_to_admin', scope: "forem.admin"), admin_root_path %><br><br>
  <%= link_to t("forem.admin.forum.new_link"), new_admin_forum_path, class: "btn btn-primary" %>

  <% @forums.group_by { |h| h['category'] }.each do |category_id, forums| %>
      <h2><%= @categories_id_name_map[category_id] || t('.no_category') %></h2>
      <table id='forums' class='forums table table-striped' cellspacing='0'>
        <thead>
        <tr>
          <th><%= t('edit', scope: 'forem.admin.forums') %></th>
          <th><%= t('delete', scope: 'forem.admin.forums') %></th>
          <th><%= t('forum', scope: 'forem.general') %></th>
          <th><%= t('topics', scope: 'forem.general') %></th>
          <th><%= t('posts', scope: 'forem.general') %></th>
        </tr>
        </thead>
        <tbody>
        <% forums.each do |forum| %>
            <tr class="forum <%= cycle("odd", "even") %>">
              <td><%= link_to t('edit', scope: 'forem.admin.forums'), edit_admin_forum_path(forum), class: "btn btn-info" %></td>
              <td><%= link_to t('delete', scope: 'forem.admin.forums'), admin_forum_path(forum), method: :delete, data: {confirm: t("delete_confirm", :scope => "forem.admin.forums")}, :class => "btn btn-danger" %></td>
              <td>
                <%= link_to forem_emojify(forum['name']), forum_path(forum) %>
                <div class='description'><%= forem_format(forum['description']) %></div>
                <%= t('.last_post') %>
                <% if last_post = @forum_last_post[forum['id']] %>
                    <%= forem_emojify(last_post['topic']['subject']) -%> <%= t('by') %> <%= last_post['user'] %> <%= time_ago_in_words(Time.at(last_post['created_at'])) -%>
                <% else %>
                    <%= t('.none') %>
                <% end %>
                <br>
              <span class='moderators'>
                <strong><%= t('.moderators') %>:</strong>
                <%= t('.none') %>
              </span>
              </td>
              <td><%= forum['topics'].size %></td>
              <td><%= @forum_post_counts[forum['id']] %></td>
            </tr>
        <% end %>
        </tbody>
      </table>
  <% end %>
</div>
